
from elevenlabs.client import ElevenLabs
from elevenlabs import play

client = ElevenLabs(
    api_key="cef795137bf0b3245d3b1c76a4ba3142b848c0dd7b18e05bc55414fb480faefc"
)

# Generate audio
audio = client.text_to_speech.convert(
    text="""అనగనగా ఒక అడవిలో ఒక సింహము వుండేది. ఓకా రోజు మధ్యానము ఆ సింహము కునుకు తీస్తూ వుండగా ఒక ఎలుక సింహం పైన పడింది.

వెంటనే సింహానికి మేలుకో రావడంతో, కిసకిసా పరిగెడుతున్న ఎలుకని సింహము పట్టుకుంది.  అల్పహారముగా బాగానే వుంటుందన్న ఉద్దేశంతో ఆ ఎలుకను నోట్లో పెట్టుకోబోయింది.

అప్పుడు తెలివైన చిట్టెలుక సింహము ఉద్దేశం గ్రహించిన వెంటనే – “ఓ రాజన్, నన్ను వదిలేయి. నా చిన్న శరీరంతో నీకు ఎలాగా ఆకలి తీరదు. నాన్ను వదిలేస్తే యే రోజైనా నీకు పనికివస్తాను!” అని ప్రాధేయపడింది.

అడవికి మృగరాజు అయిన  సింహం గర్వంతో నవ్వుతూ “నువ్వు నాకు యెమి పనికివస్తావులే కాని, క్షేమంగా వెళ్ళు.” అని ఆ ఎలుకను వదిలేసింది.

ఈ సంఘటన జరిగిన కొద్ది రోజులకు సింహము అడవిలో వేటాడుతుంటే ఒక వేటగాడి వలలో చిక్కుకుంది.

తన బలంతో ఎంత ప్రయత్నించినా వలనుంచి బయటపడలేక పోయింది. చివరికి కోపంతో, నిస్సహాయతతో గట్టిగా అడవి మొత్తం వినిపించేలా గర్జించింది. వెంటనే జంతువులన్ని దడుచుకుని దాక్కున్నాయి.

కొద్ది సేపటికి చిన్నగా, భయంతో ఉన్నఒక ఎలుక చెట్టువెనుకనుంచి కనిపించింది.

మెల్లిగా సింహం దగ్గరికి వచ్చిన ఎలుక, సింహం పరిస్తిథి చూసి వెంటనే ఎలుక తన దంతాలతో ఆ వలను చిన్న చిన్నగా కొరకడం మొదలుపెట్టింది.

ఎలుక చాలా సేపు కష్టపడడం తో. చివరికి వలలో పెద్ద చిల్లు తయ్యారయ్యింది.

వెంటనే సింహం వలలోంచి బయట పడింది. ఎలుక వైపు కృతజ్ఞతతో తిరిగి ధన్యవాదాలు తెలుపాలనుకునే సమయానికి ఎలుక పారి పోయింది.""",
    voice_id="6JsmTroalVewG1gA6Jmw",  # Replace with the correct voice ID
    model_id="eleven_multilingual_v2",
    output_format="mp3_44100_128",
)

# Convert the audio generator to bytes and save it to a file
audio_bytes = b"".join(audio)  # Consume the generator and join the bytes

# Save the audio to a file
with open("output_speech.mp3", "wb") as file:
    file.write(audio_bytes)

print("Audio saved successfully to 'output_speech.mp3'")
